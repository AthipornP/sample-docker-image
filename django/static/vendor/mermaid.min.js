/* Minimal mermaid stub for offline development - full feature set not required here.
   If you need the real library, replace this file with the official mermaid.min.js build.
*/
(function(global){
  // VERY small shim: parse a limited flowchart syntax and render as simple SVG-like HTML.
  // This is a placeholder so the app can work offline; for production use the real mermaid build.
  function renderMermaid(element){
    try{
      var code = element.textContent || element.innerText || '';
      var lines = code.split('\n').map(function(l){return l.trim();}).filter(Boolean);
      if(lines.length===0) return;
      var container = document.createElement('div');
      container.style.fontFamily='monospace';
      container.style.background='#0f1724';
      container.style.color='#e6edf3';
      container.style.padding='12px';
      container.style.borderRadius='8px';
      var ul = document.createElement('ul');
      ul.style.listStyle='none';
      ul.style.padding='0';
      lines.forEach(function(l){
        var li = document.createElement('li');
        li.textContent = l;
        li.style.padding='4px 0';
        ul.appendChild(li);
      });
      container.appendChild(ul);
      element.innerHTML='';
      element.appendChild(container);
    }catch(e){
      console.error('mermaid stub render error', e);
    }
  }
  global.mermaid = {
    initialize: function(){},
    init: function(){
      var els = document.querySelectorAll('.mermaid');
      els.forEach(function(el){renderMermaid(el);});
    },
    render: function(id, code, cb){ cb(null, code); }
  };
  // Auto-run on DOMContentLoaded
  document.addEventListener('DOMContentLoaded', function(){ if(global.mermaid && global.mermaid.init) global.mermaid.init(); });
})(window);
